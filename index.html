<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DeviceHub ‚Äî Tr√≤ ch∆°i & H∆∞·ªõng d·∫´n Thi·∫øt b·ªã s·ªë</title>

  <!-- Tailwind CDN (Play) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --accent1:#0ea5e9;
      --accent2:#7c3aed;
      --muted:#6b7280;
    }
    html,body,#root{height:100%}
    body{font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;background:linear-gradient(180deg,#f8fafc 0%,#ffffff 100%);color:#0f172a}
    .nav-glass{background:rgba(255,255,255,0.6);backdrop-filter:blur(6px);box-shadow:0 6px 18px rgba(2,6,23,0.06);border-radius:12px}
    .card{background:white;border-radius:12px;padding:1rem;box-shadow:0 6px 18px rgba(2,6,23,0.04)}
    .btn-primary{background:linear-gradient(90deg,var(--accent2),var(--accent1));color:white}
    .logo-badge{display:inline-flex;align-items:center;gap:.5rem;padding:.4rem .6rem;border-radius:10px;background:linear-gradient(135deg,var(--accent2),var(--accent1));color:white}
    .kbd{background:#111827;color:white;padding:.12rem .4rem;border-radius:.35rem;font-size:.78rem}
    #confetti{position:fixed;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:9999}
    /* small animation */
    .float{animation:float 6s ease-in-out infinite}
    @keyframes float{0%{transform:translateY(0)}50%{transform:translateY(-6px)}100%{transform:translateY(0)}}
    /* responsive content width */
    .container{max-width:1100px;margin-inline:auto;padding:1rem}
    .footer{opacity:.8;font-size:.9rem;color:var(--muted)}
    a.no-underline{ text-decoration:none }
  </style>
  <!-- favicon (inline SVG data URL) -->
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' rx='20' fill='%237c3aed'/%3E%3Ctext x='50' y='58' font-size='48' text-anchor='middle' fill='white' font-family='Inter,Arial' font-weight='700'%3EDG%3C/text%3E%3C/svg%3E">
</head>
<body>
  <canvas id="confetti"></canvas>
  <div id="root" class="min-h-screen"></div>

  <!-- React & Babel UMD -->
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <script type="text/babel">
  const { useState, useEffect, useRef } = React;

  /* ---------- Utilities ---------- */

  // Simple WebAudio small sounds
  const Sound = (() => {
    const ctx = (window.AudioContext || window.webkitAudioContext) ? new (window.AudioContext || window.webkitAudioContext)() : null;
    function play(freq, time=0.08, type='sine', vol=0.08){
      if(!ctx) return;
      const o = ctx.createOscillator();
      const g = ctx.createGain();
      o.type = type; o.frequency.value = freq;
      g.gain.value = vol;
      o.connect(g); g.connect(ctx.destination);
      o.start(); o.stop(ctx.currentTime + time);
    }
    return {
      correct(){ play(880,0.08,'sine',0.06); setTimeout(()=>play(1320,0.06,'sine',0.04),70) },
      wrong(){ play(180,0.12,'square',0.12) },
      click(){ play(520,0.04,'sine',0.06) }
    }
  })();

  // Confetti (canvas)
  function fireConfetti(){
    const c = document.getElementById('confetti');
    if(!c) return;
    const ctx = c.getContext('2d'); const w=c.width=window.innerWidth, h=c.height=window.innerHeight;
    const pieces=[]; const cols=['#7c3aed','#06b6d4','#ffb86b','#ff7b7b','#7ee787','#cba6ff'];
    for(let i=0;i<120;i++){ pieces.push({x:Math.random()*w,y:-Math.random()*h*0.5,vx:(Math.random()-0.5)*7,vy:2+Math.random()*5,size:6+Math.random()*12,col:cols[Math.floor(Math.random()*cols.length)],rot:Math.random()*360,vr:(Math.random()-0.5)*8}); }
    let t=0;
    function frame(){
      ctx.clearRect(0,0,w,h); t++;
      for(const p of pieces){
        p.x+=p.vx; p.y+=p.vy; p.vy+=0.03; p.rot += p.vr;
        ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.rot*Math.PI/180);
        ctx.fillStyle = p.col; ctx.fillRect(-p.size/2,-p.size/2,p.size,p.size*0.6); ctx.restore();
      }
      if(t<260) requestAnimationFrame(frame); else ctx.clearRect(0,0,w,h);
    }
    frame();
  }

  // Download helper
  function downloadFile(filename, content, mime='text/plain'){
    const blob = new Blob([content], {type:mime});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url; a.download = filename;
    document.body.appendChild(a); a.click();
    a.remove(); URL.revokeObjectURL(url);
  }

  // format time
  function htime(ts){ const d=new Date(ts); return d.toLocaleString(); }

  /* ---------- Data (sample resources, gallery) ---------- */

  const SAMPLE_DOC_MD = `# H∆∞·ªõng d·∫´n k·∫øt n·ªëi Bluetooth ‚Äî DeviceHub

Phi√™n b·∫£n: 1.0
N·ªôi dung: H∆∞·ªõng d·∫´n chi ti·∫øt k·∫øt n·ªëi m√°y t√≠nh ‚Üî ƒëi·ªán tho·∫°i qua Bluetooth

1. Windows 10/11
- B·∫≠t Bluetooth tr√™n ƒëi·ªán tho·∫°i v√† ƒë·∫∑t ·ªü ch·∫ø ƒë·ªô Discoverable.
- Tr√™n Windows: Settings ‚Üí Bluetooth & devices ‚Üí Add device ‚Üí Bluetooth.
- Ch·∫•p nh·∫≠n v√† x√°c nh·∫≠n m√£ n·∫øu ƒë∆∞·ª£c y√™u c·∫ßu.
- G·ª≠i file t·ª´ ƒëi·ªán tho·∫°i: Share ‚Üí Bluetooth ‚Üí ch·ªçn t√™n m√°y t√≠nh. Tr√™n Windows ch·∫•p nh·∫≠n s·∫Ω m·ªü h·ªôp tho·∫°i ch·ªçn n∆°i l∆∞u.

2. macOS
- B·∫≠t Bluetooth tr√™n Mac v√† thi·∫øt b·ªã.
- System Settings ‚Üí Bluetooth ‚Üí Pair.
- ƒê·ªëi v·ªõi Android, d√πng Bluetooth File Exchange ƒë·ªÉ nh·∫≠n file; iPhone s·ª≠ d·ª•ng AirDrop.

3. Android
- Ch·ªçn file ‚Üí Share ‚Üí Bluetooth ‚Üí ch·ªçn thi·∫øt b·ªã.
- N·∫øu kh√¥ng th·∫•y, b·∫≠t Visible/Discoverable.

4. iPhone
- iPhone kh√¥ng chia s·∫ª Bluetooth tr·ª±c ti·∫øp v·ªõi Android/Windows; d√πng AirDrop (Apple), c√°p ho·∫∑c d·ªãch v·ª• ƒë√°m m√¢y.

--- 
DeviceHub ‚Äî t√†i li·ªáu t·∫°o t·ª± ƒë·ªông.
`;

  const GALLERY = [
    {id:1, src:"https://images.unsplash.com/photo-1517336714731-489689fd1ca8?w=1200&q=80&auto=format&fit=crop", alt:"Laptop v√† ƒëi·ªán tho·∫°i"},
    {id:2, src:"https://images.unsplash.com/photo-1518770660439-4636190af475?w=1200&q=80&auto=format&fit=crop", alt:"Router ph√°t wifi"},
    {id:3, src:"https://images.unsplash.com/photo-1587825140708-0b4b9d3f1f3b?w=1200&q=80&auto=format&fit=crop", alt:"USB flash drive"},
    {id:4, src:"https://images.unsplash.com/photo-1512496015851-a90fb38ba796?w=1200&q=80&auto=format&fit=crop", alt:"Ng∆∞·ªùi d√πng c·∫ßm ƒëi·ªán tho·∫°i"},
    {id:5, src:"https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=1200&q=80&auto=format&fit=crop", alt:"M√†n h√¨nh m√°y t√≠nh"},
  ];

  /* ---------- Comments (localStorage) ---------- */
  const COMMENTS_KEY = 'dh_comments_v1';
  function getComments(){ try{ return JSON.parse(localStorage.getItem(COMMENTS_KEY) || '[]'); }catch(e){ return []; } }
  function saveComments(list){ localStorage.setItem(COMMENTS_KEY, JSON.stringify(list)); }

  /* ---------- Router (hash-based) ---------- */
  function useHashRoute(){
    const [route, setRoute] = useState(window.location.hash.slice(1) || '/');
    useEffect(()=>{
      const onHash = ()=> setRoute(window.location.hash.slice(1) || '/');
      window.addEventListener('hashchange', onHash);
      return ()=> window.removeEventListener('hashchange', onHash);
    },[]);
    function nav(to){ window.location.hash = to; }
    return [route, nav];
  }

  /* ---------- Components / Pages ---------- */

  function TopNav({route, nav}){
    const items = [
      {to:'/', label:'Trang ch·ªß'},
      {to:'/games', label:'Tr√≤ ch∆°i'},
      {to:'/guides', label:'H∆∞·ªõng d·∫´n'},
      {to:'/resources', label:'T√†i li·ªáu'},
      {to:'/gallery', label:'Gallery'},
      {to:'/comments', label:'B√¨nh lu·∫≠n'}
    ];
    return (
      <div className="nav-glass p-4 container flex items-center justify-between gap-4">
        <div className="flex items-center gap-4">
          <div className="logo-badge">
            <svg width="36" height="36" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="2" y="4" width="20" height="12" rx="2" fill="white" opacity="0.06"/><path d="M8 9h8M8 12h6" stroke="white" strokeWidth="1.2" strokeLinecap="round"/><circle cx="8" cy="18" r="1.6" fill="white" opacity="0.9"/><circle cx="16" cy="18" r="1.6" fill="white" opacity="0.9"/></svg>
            <div>
              <div className="font-bold text-sm">DeviceHub</div>
              <div className="text-xs">H·ªçc ‚Äî Tr√≤ ch∆°i ‚Äî H∆∞·ªõng d·∫´n</div>
            </div>
          </div>
          <nav className="hidden md:flex gap-2 ml-4">
            {items.map(it=>(
              <button key={it.to} onClick={()=>nav(it.to)} className={"px-3 py-2 rounded text-sm "+(route===it.to ? "bg-white/80 shadow":"text-sm text-gray-600 hover:bg-white/60")}>
                {it.label}
              </button>
            ))}
          </nav>
        </div>

        <div className="flex items-center gap-2">
          <button onClick={()=>nav('/resources')} className="px-3 py-2 rounded border text-sm">T·∫£i t√†i li·ªáu</button>
          <a className="px-3 py-2 rounded btn-primary hover:opacity-95 text-sm no-underline" href="#/comments">G·ª≠i g√≥p √Ω</a>
          <button onClick={()=>{ fireConfetti(); Sound.click(); }} title="Test confetti" className="p-2 rounded bg-white/80 hidden md:inline">üéâ</button>
          <div className="md:hidden">
            <select onChange={(e)=>nav(e.target.value)} defaultValue={route} className="p-2 border rounded">
              {items.map(it=><option key={it.to} value={it.to}>{it.label}</option>)}
            </select>
          </div>
        </div>
      </div>
    );
  }

  function Breadcrumb({route}){
    const map = {'/':'Trang ch·ªß','/games':'Tr√≤ ch∆°i','/guides':'H∆∞·ªõng d·∫´n','/resources':'T√†i li·ªáu','/gallery':'Gallery','/comments':'B√¨nh lu·∫≠n'};
    return (
      <div className="container my-4 text-sm text-gray-600">
        <div>{map[route] || 'Trang'} ‚Ä¢ DeviceHub</div>
      </div>
    );
  }

  function Home(){
    return (
      <div className="container">
        <div className="grid md:grid-cols-3 gap-6">
          <div className="md:col-span-2">
            <div className="card">
              <h2 className="text-2xl font-bold">Ch√†o m·ª´ng ƒë·∫øn v·ªõi DeviceHub</h2>
              <p className="text-gray-600 mt-2">M·ªôt website gi√°o d·ª•c d·∫°ng portal d√†nh cho h·ªçc sinh: tr√≤ ch∆°i, h∆∞·ªõng d·∫´n k·ªπ thu·∫≠t, t√†i li·ªáu, gallery v√† n∆°i trao ƒë·ªïi. M·ª•c ti√™u: gi√∫p b·∫°n hi·ªÉu r√µ c√°c thi·∫øt b·ªã s·ªë th√¥ng d·ª•ng v√† h·ªçc c√°ch truy·ªÅn file an to√†n qua Bluetooth.</p>

              <div className="mt-4 grid md:grid-cols-2 gap-4">
                <div className="p-4 border rounded">
                  <h3 className="font-semibold">Tr√≤ ch∆°i</h3>
                  <p className="text-sm text-gray-600 mt-1">Quiz, gh√©p ƒë√¥i, mini-game ‚Äî v·ª´a h·ªçc v·ª´a ch∆°i.</p>
                </div>
                <div className="p-4 border rounded">
                  <h3 className="font-semibold">H∆∞·ªõng d·∫´n Bluetooth</h3>
                  <p className="text-sm text-gray-600 mt-1">B∆∞·ªõc-by-step cho Windows, macOS, Android, iPhone.</p>
                </div>
                <div className="p-4 border rounded">
                  <h3 className="font-semibold">T·∫£i t√†i li·ªáu</h3>
                  <p className="text-sm text-gray-600 mt-1">T·∫£i cheat-sheet, slides, handout cho b√†i ki·ªÉm tra.</p>
                </div>
                <div className="p-4 border rounded">
                  <h3 className="font-semibold">B√¨nh lu·∫≠n & Feedback</h3>
                  <p className="text-sm text-gray-600 mt-1">N∆°i h·ªçc sinh v√† gi√°o vi√™n th·∫£o lu·∫≠n.</p>
                </div>
              </div>
            </div>

            <div className="card mt-4">
              <h3 className="font-semibold">Nh·ªØng ƒëi·ªÅu c·∫ßn bi·∫øt nhanh</h3>
              <ul className="list-disc pl-5 mt-2 text-sm text-gray-700">
                <li>Bluetooth ph√π h·ª£p truy·ªÅn file nh·ªè, ti·ªán nh∆∞ng ch·∫≠m h∆°n Wi-Fi hay c√°p.</li>
                <li>iPhone d√πng AirDrop cho Apple ecosystem; d√πng c√°p ho·∫∑c ƒë√°m m√¢y cho kh√°c n·ªÅn t·∫£ng.</li>
                <li>Lu√¥n t·∫Øt discoverable khi kh√¥ng c·∫ßn thi·∫øt ƒë·ªÉ tr√°nh r·ªßi ro b·∫£o m·∫≠t.</li>
              </ul>
            </div>

          </div>

          <aside>
            <div className="card">
              <h4 className="font-semibold">T√¨m nhanh</h4>
              <SearchBox />
            </div>

            <div className="card mt-4">
              <h4 className="font-semibold">T√†i nguy√™n nhanh</h4>
              <div className="mt-2">
                <button className="w-full px-3 py-2 rounded btn-primary" onClick={() => downloadFile('HuongDan_Bluetooth.md', SAMPLE_DOC_MD, 'text/markdown')}>T·∫£i H∆∞·ªõng d·∫´n (MD)</button>
                <button className="w-full px-3 py-2 rounded border mt-2" onClick={()=>alert('B·∫°n c√≥ th·ªÉ th√™m file PDF v√†o repo v√† link ·ªü trang Resources.')}>Upload PDF l√™n repo</button>
              </div>
            </div>

            <div className="card mt-4">
              <h4 className="font-semibold">Gallery</h4>
              <div className="mt-2 grid grid-cols-3 gap-2">
                {GALLERY.slice(0,3).map(img=>(
                  <img key={img.id} src={img.src+'&w=300&q=60&auto=format&fit=crop'} className="rounded w-full h-20 object-cover" alt={img.alt}/>
                ))}
              </div>
            </div>
          </aside>
        </div>
      </div>
    );
  }

  /* ---------- Search component (client-side search across pages) ---------- */
  function SearchBox(){
    const [q, setQ] = useState('');
    const [res, setRes] = useState([]);
    function run(){
      const r = [];
      if('quiz'.includes(q.toLowerCase())) r.push({title:'Quiz nhanh', path:'/games'});
      if('bluetooth'.includes(q.toLowerCase())) r.push({title:'H∆∞·ªõng d·∫´n Bluetooth', path:'/guides'});
      if('t√†i li·ªáu'.includes(q.toLowerCase())) r.push({title:'T√†i li·ªáu', path:'/resources'});
      setRes(r);
    }
    return (
      <div>
        <input value={q} onChange={(e)=>setQ(e.target.value)} placeholder="T√¨m: bluetooth, quiz, t√†i li·ªáu..." className="w-full p-2 border rounded" />
        <div className="mt-2 flex gap-2">
          <button onClick={()=>{ run(); Sound.click(); }} className="px-3 py-2 rounded border">T√¨m</button>
          <button onClick={()=>{ setQ(''); setRes([]); }} className="px-3 py-2 rounded">X√≥a</button>
        </div>
        <div className="mt-2">
          {res.map((r,i)=> <div key={i} className="text-sm"><a className="text-indigo-600" href={"#"+r.path}>{r.title}</a></div>)}
        </div>
      </div>
    );
  }

  /* ---------- Games page ---------- */
  function GamesPage(){
    return (
      <div className="container">
        <div className="card">
          <h2 className="text-2xl font-bold">Tr√≤ ch∆°i & Ki·ªÉm tra</h2>
          <p className="text-sm text-gray-600 mt-1">D√πng tr√≤ ch∆°i ƒë·ªÉ √¥n nhanh ki·∫øn th·ª©c v·ªÅ thi·∫øt b·ªã s·ªë.</p>

          <div className="mt-4 grid md:grid-cols-2 gap-4">
            <div className="card">
              <QuizEnhanced />
            </div>
            <div className="card">
              <MatchEnhanced />
            </div>
          </div>

          <div className="mt-4">
            <h3 className="font-semibold">Mini-game th√™m</h3>
            <p className="text-sm text-gray-600 mt-1">M√¨nh ƒë√£ t√≠ch h·ª£p mini-game "ƒê·∫≠p ƒë·ªì c≈©" v√† b·∫£ng ƒëi·ªÉm l∆∞u local (n·∫øu mu·ªën leaderboard qua server, c·∫ßn backend).</p>
          </div>
        </div>
      </div>
    );
  }

  /* ---------- Guides page ---------- */
  function GuidesPage(){
    return (
      <div className="container">
        <div className="card">
          <h2 className="text-2xl font-bold">H∆∞·ªõng d·∫´n k·∫øt n·ªëi Bluetooth & truy·ªÅn file</h2>
          <p className="text-sm text-gray-600 mt-1">H∆∞·ªõng d·∫´n chi ti·∫øt theo h·ªá ƒëi·ªÅu h√†nh, k√®m m·∫πo x·ª≠ l√Ω s·ª± c·ªë.</p>

          <div className="mt-4 grid md:grid-cols-2 gap-4">
            <div>
              <h3 className="font-semibold">Windows 10 / 11</h3>
              <ol className="list-decimal pl-5 text-sm mt-2 text-gray-700">
                <li>B·∫≠t Bluetooth tr√™n ƒëi·ªán tho·∫°i v√† ƒë·∫∑t ·ªü tr·∫°ng th√°i visible.</li>
                <li>Windows: Settings ‚Üí Bluetooth & devices ‚Üí Add device ‚Üí Bluetooth ‚Üí ch·ªçn thi·∫øt b·ªã.</li>
                <li>X√°c nh·∫≠n m√£ gh√©p (n·∫øu hi·ªÉn th·ªã). ƒê·ªÉ g·ª≠i file t·ª´ ƒëi·ªán tho·∫°i: Share ‚Üí Bluetooth ‚Üí ch·ªçn PC; tr√™n PC ch·∫•p nh·∫≠n h·ªôp tho·∫°i nh·∫≠n file.</li>
              </ol>
            </div>

            <div>
              <h3 className="font-semibold">macOS</h3>
              <ol className="list-decimal pl-5 text-sm mt-2 text-gray-700">
                <li>System Settings ‚Üí Bluetooth ‚Üí Pair. V·ªõi Android c√≥ th·ªÉ d√πng "Bluetooth File Exchange".</li>
                <li>V·ªõi iPhone, d√πng AirDrop ƒë·ªÉ chia s·∫ª v·ªõi Mac (nhanh h∆°n v√† ·ªïn ƒë·ªãnh h∆°n).</li>
              </ol>
            </div>
          </div>

          <div className="mt-4 grid md:grid-cols-2 gap-4">
            <div>
              <h3 className="font-semibold">Android</h3>
              <ol className="list-decimal pl-5 text-sm mt-2 text-gray-700">
                <li>M·ªü file ‚Üí Share ‚Üí Bluetooth ‚Üí ch·ªçn thi·∫øt b·ªã ƒë√£ pair.</li>
                <li>N·∫øu kh√¥ng th·∫•y thi·∫øt b·ªã: b·∫≠t Visible/Discoverable trong Bluetooth settings.</li>
                <li>N·∫øu nhi·ªÅu l·ªói: Forget device tr√™n c·∫£ hai thi·∫øt b·ªã r·ªìi pair l·∫°i.</li>
              </ol>
            </div>

            <div>
              <h3 className="font-semibold">iPhone</h3>
              <ol className="list-decimal pl-5 text-sm mt-2 text-gray-700">
                <li>iPhone kh√¥ng chia s·∫ª Bluetooth cho Windows/Android theo m·∫∑c ƒë·ªãnh ‚Äî d√πng AirDrop cho Apple, c√°p ho·∫∑c d·ªãch v·ª• ƒë√°m m√¢y cho kh√°c n·ªÅn t·∫£ng.</li>
                <li>Snapdrop (web) l√† 1 gi·∫£i ph√°p nhanh n·∫øu c·∫£ hai thi·∫øt b·ªã trong c√πng m·∫°ng Wi-Fi.</li>
              </ol>
            </div>
          </div>

          <div className="mt-4">
            <h3 className="font-semibold">M·∫πo x·ª≠ l√Ω s·ª± c·ªë</h3>
            <ul className="list-disc pl-5 text-sm mt-2 text-gray-700">
              <li>T·∫Øt/B·∫≠t Bluetooth & kh·ªüi ƒë·ªông l·∫°i thi·∫øt b·ªã.</li>
              <li>ƒê·∫£m b·∫£o thi·∫øt b·ªã ·ªü ph·∫°m vi v√†i m√©t, kh√¥ng nhi·ªÅu v·∫≠t c·∫£n.</li>
              <li>G·ª° gh√©p (Forget) v√† pair l·∫°i n·∫øu g·∫∑p l·ªói m√£.</li>
              <li>Ki·ªÉm tra driver Bluetooth (Windows) / c·∫≠p nh·∫≠t h·ªá ƒëi·ªÅu h√†nh.</li>
            </ul>
          </div>

          <div className="mt-4 flex gap-2">
            <button className="px-3 py-2 rounded btn-primary" onClick={()=>downloadFile('HuongDan_Bluetooth.md', SAMPLE_DOC_MD, 'text/markdown')}>T·∫£i full guide (MD)</button>
            <button className="px-3 py-2 rounded border" onClick={()=>alert('ƒê·ªÉ c√≥ PDF ch·∫•t l∆∞·ª£ng, b·∫°n c√≥ th·ªÉ d√πng c√¥ng c·ª• chuy·ªÉn MD ‚Üí PDF (online) ho·∫∑c Visual Studio Code + ext)'}>Chuy·ªÉn sang PDF (g·ª£i √Ω)</button>
          </div>
        </div>
      </div>
    );
  }

  /* ---------- Resources page (download files, add your own) ---------- */
  function ResourcesPage(){
    // sample resources list; real site: add files to repo and link here
    const items = [
      {id:'guide-md', title:'H∆∞·ªõng d·∫´n Bluetooth (Markdown)', filename:'HuongDan_Bluetooth.md', content:SAMPLE_DOC_MD},
      {id:'cheatsheet', title:'Cheat-sheet: C√°c c·ªïng & thi·∫øt b·ªã (TXT)', filename:'Cheatsheet_ports.txt', content:'USB-A: truy·ªÅn d·ªØ li·ªáu; USB-C: ƒëa nƒÉng; HDMI: xu·∫•t h√¨nh; RJ45: m·∫°ng c√≥ d√¢y.'}
    ];

    return (
      <div className="container">
        <div className="card">
          <h2 className="text-2xl font-bold">T√†i li·ªáu & Download</h2>
          <p className="text-sm text-gray-600 mt-1">T·∫£i xu·ªëng t√†i li·ªáu h·ªçc t·∫≠p ‚Äî b·∫°n c√≥ th·ªÉ upload th√™m file PDF v√†o repo v√† link ·ªü ƒë√¢y.</p>

          <div className="mt-4 grid gap-3">
            {items.map(it=>(
              <div key={it.id} className="flex items-center justify-between border rounded p-3">
                <div>
                  <div className="font-semibold">{it.title}</div>
                  <div className="text-xs text-gray-500">File: {it.filename}</div>
                </div>
                <div className="flex gap-2">
                  <button className="px-3 py-1 rounded border" onClick={()=>downloadFile(it.filename, it.content, it.filename.endsWith('.md')? 'text/markdown' : 'text/plain')}>T·∫£i</button>
                  <button className="px-3 py-1 rounded" onClick={()=>navigator.clipboard && navigator.clipboard.writeText(it.content).then(()=>alert('ƒê√£ copy n·ªôi dung v√†o clipboard'))}>Copy n·ªôi dung</button>
                </div>
              </div>
            ))}
          </div>

          <div className="mt-4 text-sm text-gray-500">Mu·ªën upload PDF v√†o web: th√™m file v√†o repo (Add file ‚Üí Upload files) r·ªìi link tr·ª±c ti·∫øp t·ªõi file ƒë√≥.</div>
        </div>
      </div>
    );
  }

  /* ---------- Gallery page ---------- */
  function GalleryPage(){
    return (
      <div className="container">
        <div className="card">
          <h2 className="text-2xl font-bold">Gallery ·∫£nh minh h·ªça</h2>
          <p className="text-sm text-gray-600 mt-1">·∫¢nh l·∫•y t·ª´ Unsplash (·ª©ng d·ª•ng demo), b·∫°n c√≥ th·ªÉ thay b·∫±ng ·∫£nh trong repo.</p>
          <div className="mt-4 grid sm:grid-cols-2 md:grid-cols-3 gap-3">
            {GALLERY.map(img=>(
              <div key={img.id} className="rounded overflow-hidden card">
                <img src={img.src+'&w=800&q=80&auto=format&fit=crop'} alt={img.alt} className="w-full h-44 object-cover"/>
                <div className="p-3">
                  <div className="font-semibold text-sm">{img.alt}</div>
                  <div className="text-xs text-gray-500 mt-1">·∫¢nh v√≠ d·ª•</div>
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
    );
  }

  /* ---------- Comments page (localStorage) ---------- */
  function CommentsPage(){
    const [list, setList] = useState(getComments());
    const [name, setName] = useState('');
    const [text, setText] = useState('');
    const [page, setPage] = useState(1);
    const perPage = 6;
    function refresh(){ const arr=getComments(); setList(arr); }
    function post(){
      if(!name.trim()||!text.trim()){ alert('Nh·∫≠p t√™n v√† n·ªôi dung'); return; }
      const c = {id:Date.now(), name: name.trim(), text: text.trim(), ts:Date.now()};
      const arr = [c, ...getComments()];
      saveComments(arr); setName(''); setText(''); refresh(); Sound.click();
    }
    function remove(id){
      if(!confirm('X√≥a comment n√†y? (ch·ªâ local)')) return;
      const arr = getComments().filter(x=>x.id!==id); saveComments(arr); refresh();
    }
    function exportComments(){
      const arr = getComments(); downloadFile('comments.json', JSON.stringify(arr, null, 2), 'application/json');
    }
    const total = list.length; const pages = Math.max(1, Math.ceil(total / perPage));
    const visible = list.slice((page-1)*perPage, (page-1)*perPage + perPage);

    useEffect(()=>{ refresh(); },[]);

    return (
      <div className="container">
        <div className="card">
          <h2 className="text-2xl font-bold">B√¨nh lu·∫≠n & G√≥p √Ω</h2>
          <p className="text-sm text-gray-600 mt-1">G·ª≠i g√≥p √Ω cho website ‚Äî d·ªØ li·ªáu l∆∞u tr√™n tr√¨nh duy·ªát (local). Gi√°o vi√™n c√≥ th·ªÉ export comments (JSON).</p>

          <div className="mt-4 grid gap-3">
            <div className="grid md:grid-cols-3 gap-2">
              <input className="p-2 border rounded" placeholder="T√™n" value={name} onChange={e=>setName(e.target.value)} />
              <input className="p-2 border rounded md:col-span-2" placeholder="N·ªôi dung g√≥p √Ω" value={text} onChange={e=>setText(e.target.value)} />
            </div>
            <div className="flex gap-2">
              <button className="px-3 py-2 rounded btn-primary" onClick={()=>post()}>G·ª≠i</button>
              <button className="px-3 py-2 rounded border" onClick={()=>exportComments()}>Export JSON</button>
              <button className="px-3 py-2 rounded" onClick={()=>{ saveComments([]); refresh(); }}>X√≥a t·∫•t c·∫£ (local)</button>
            </div>

            <div className="mt-2">
              <div className="text-sm text-gray-500 mb-2">T·ªïng: {total} b√¨nh lu·∫≠n</div>
              {visible.length===0 && <div className="text-sm text-gray-500">Ch∆∞a c√≥ b√¨nh lu·∫≠n</div>}
              {visible.map(c=>(
                <div key={c.id} className="border rounded p-3 mb-2">
                  <div className="flex items-start justify-between">
                    <div>
                      <div className="font-semibold">{c.name}</div>
                      <div className="text-xs text-gray-500">{htime(c.ts)}</div>
                    </div>
                    <div className="text-sm text-gray-500">
                      <button className="px-2 py-1 rounded" onClick={()=>{ navigator.clipboard && navigator.clipboard.writeText(JSON.stringify(c)); alert('Copied'); }}>Copy</button>
                      <button className="px-2 py-1 rounded ml-2 text-red-600" onClick={()=>remove(c.id)}>X√≥a</button>
                    </div>
                  </div>
                  <div className="mt-2 text-gray-700">{c.text}</div>
                </div>
              ))}

              <div className="mt-3 flex items-center gap-2">
                <button disabled={page<=1} onClick={()=>setPage(p=>Math.max(1,p-1))} className="px-2 py-1 border rounded">‚Äπ</button>
                <div className="text-sm">Trang {page}/{pages}</div>
                <button disabled={page>=pages} onClick={()=>setPage(p=>Math.min(p+1,pages))} className="px-2 py-1 border rounded">‚Ä∫</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    );
  }

  /* ---------- Quiz & Match components (improved small) ---------- */

  const QUIZ = [
    {q:'Thi·∫øt b·ªã n√†o nh·∫≠p gi·ªçng n√≥i?', choices:['Microphone','Monitor','Router','Printer'], a:0},
    {q:'Bluetooth l√† g√¨?', choices:['M·ªôt h√£ng','Giao th·ª©c kh√¥ng d√¢y t·∫ßm ng·∫Øn','M√†n h√¨nh','·ªî c·ª©ng'], a:1},
    {q:'USB flash d√πng ƒë·ªÉ?', choices:['L∆∞u tr·ªØ','In ·∫•n','G·ªçi ƒëi·ªán','Ph√°t wifi'], a:0},
    {q:'USB-C c√≥ ƒë·∫∑c ƒëi·ªÉm?', choices:['Ch·ªâ s·∫°c','ƒêa nƒÉng (s·∫°c, d·ªØ li·ªáu, xu·∫•t h√¨nh)','Ch·ªâ in','Kh√¥ng d√πng'], a:1},
  ];

  function QuizEnhanced(){
    const [i, setI] = useState(0), [score, setScore]=useState(0), [done,setDone]=useState(false);
    const bestK='dh_quiz_best'; const [best,setBest]=useState(()=>Number(localStorage.getItem(bestK)||0));
    function choose(idx){
      const correct = (idx === QUIZ[i].a);
      if(correct){ setScore(s=>s+1); Sound.correct(); } else { Sound.wrong(); }
      if(i+1>=QUIZ.length){ const final = score + (correct?1:0); setDone(true); if(final>best){ localStorage.setItem(bestK,String(final)); setBest(final); } setTimeout(()=>fireConfetti(),300); }
      else setI(i+1);
    }
    function reset(){ setI(0); setScore(0); setDone(false); }
    return (
      <div>
        <div className="flex items-center justify-between">
          <div><strong>Quiz nhanh</strong><div className="text-xs text-gray-500">√în t·∫≠p c∆° b·∫£n</div></div>
          <div className="text-xs text-gray-500">Best: <strong>{best}</strong>/{QUIZ.length}</div>
        </div>
        <div className="mt-3">
          {!done ? (
            <>
              <div className="text-sm text-gray-600 mb-2">C√¢u {i+1}/{QUIZ.length}</div>
              <div className="font-medium">{QUIZ[i].q}</div>
              <div className="grid gap-2 mt-3">
                {QUIZ[i].choices.map((c,idx)=>(
                  <button key={idx} onClick={()=>choose(idx)} className="p-2 rounded border text-left hover:shadow-sm bg-white">{c}</button>
                ))}
              </div>
            </>
          ) : (
            <div className="text-center">
              <div className="text-lg font-bold">ƒê√£ xong üéâ</div>
              <div className="mt-2">ƒêi·ªÉm: <strong>{score}</strong> / {QUIZ.length}</div>
              <div className="mt-3"><button className="px-3 py-1 rounded border" onClick={reset}>L√†m l·∫°i</button></div>
            </div>
          )}
        </div>
      </div>
    );
  }

  function MatchEnhanced(){
    const items = MATCH_ITEMS;
    const [left,setLeft]=useState(()=>shuffle(items));
    const [right,setRight]=useState(()=>shuffle(items.map(i=>({...i,face:i.hint}))));
    const [sel,setSel]=useState(null); const [matches,setMatches]=useState([]); const [moves,setMoves]=useState(0);
    const bestK='dh_match_best'; const [best,setBest]=useState(()=>Number(localStorage.getItem(bestK)||0));
    function pickLeft(it){ setSel({side:'L',it}); }
    function pickRight(it){
      if(!sel){ setSel({side:'R',it}); return; }
      let a,b; if(sel.side==='L'){ a=sel.it; b=it; } else { a=it; b=sel.it; }
      setMoves(m=>m+1);
      if(a.id===b.id){
        setMatches(m=>{ const next=[...m,a.id]; if(next.length===items.length){ const final = moves+1; if(best===0 || final < best){ localStorage.setItem(bestK,String(final)); setBest(final); } setTimeout(()=>fireConfetti(),200); } return next; });
        Sound.correct();
      } else { Sound.wrong(); }
      setSel(null);
    }
    function reset(){ setLeft(shuffle(items)); setRight(shuffle(items.map(i=>({...i,face:i.hint})))); setMatches([]); setMoves(0); setSel(null); }
    return (
      <div>
        <div className="flex items-center justify-between">
          <div><strong>Gh√©p ƒë√¥i</strong><div className="text-xs text-gray-500">T√™n ‚Üî Ch·ª©c nƒÉng</div></div>
          <div className="text-xs text-gray-500">Moves: <strong>{moves}</strong> | Best: <strong>{best||'-'}</strong></div>
        </div>
        <div className="mt-3 grid grid-cols-2 gap-3">
          <div>
            <div className="text-xs text-gray-400 mb-2">T√™n</div>
            <div className="grid gap-2">
              {left.map(it=>(
                <button key={it.id} disabled={matches.includes(it.id)} onClick={()=>pickLeft(it)} className={`p-2 text-left border rounded ${sel?.it?.id===it.id && sel.side==='L' ? 'ring-2 ring-indigo-300' : ''} ${matches.includes(it.id)? 'opacity-40 line-through' : ''}`}>{it.name}</button>
              ))}
            </div>
          </div>
          <div>
            <div className="text-xs text-gray-400 mb-2">Ch·ª©c nƒÉng</div>
            <div className="grid gap-2">
              {right.map(it=>(
                <button key={it.id} disabled={matches.includes(it.id)} onClick={()=>pickRight(it)} className={`p-2 text-left border rounded ${sel?.it?.id===it.id && sel.side==='R' ? 'ring-2 ring-indigo-300' : ''} ${matches.includes(it.id)? 'opacity-40 line-through' : ''}`}>{it.face}</button>
              ))}
            </div>
          </div>
        </div>
        <div className="mt-3 flex items-center justify-between">
          <div className="text-sm">{matches.length}/{items.length} ƒë√£ gh√©p</div>
          <div><button className="px-3 py-1 border rounded" onClick={reset}>L√†m l·∫°i</button></div>
        </div>
        {matches.length===items.length && <div className="mt-3 p-3 bg-green-50 rounded">Ch√∫c m·ª´ng! B·∫°n ho√†n th√†nh trong {moves} l∆∞·ª£t üéâ</div>}
      </div>
    );
  }

  /* ---------- Router + App ---------- */
  function App(){
    const [route, nav] = useHashRoute();
    useEffect(()=>{ if(!window.location.hash) window.location.hash='/'; },[]);
    function renderRoute(){
      if(route === '/' ) return <Home />;
      if(route === '/games') return <GamesPage />;
      if(route === '/guides') return <GuidesPage />;
      if(route === '/resources') return <ResourcesPage />;
      if(route === '/gallery') return <GalleryPage />;
      if(route === '/comments') return <CommentsPage />;
      // fallback
      return <Home />;
    }
    return (
      <div>
        <TopNav route={route} nav={nav} />
        <Breadcrumb route={route} />
        <main className="pb-20">{ renderRoute() }</main>
        <div className="container">
          <div className="flex items-center justify-between mt-6">
            <div className="footer">¬© {new Date().getFullYear()} DeviceHub ‚Äî H·ªçc qua tr√≤ ch∆°i. ƒê∆∞·ª£c t·∫°o ƒë·ªÉ tr√¨nh di·ªÖn.</div>
            <div className="text-sm text-gray-500">Deploy: GitHub Pages / Netlify / Vercel</div>
          </div>
        </div>
      </div>
    );
  }

  // render
  const root = ReactDOM.createRoot(document.getElementById('root'));
  root.render(<App />);

  </script>
</body>
</html>
